<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Home | @fnndsc/chrisapi</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="JavaScript6 client for the ChRIS API"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@fnndsc/chrisapi"><meta property="twitter:description" content="JavaScript6 client for the ChRIS API"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/cj.js~Collection.html">Collection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client.js~Client.html">Client</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/comment.js~Comment.html">Comment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/comment.js~CommentList.html">CommentList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/exception.js~RequestException.html">RequestException</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/feed.js~Feed.html">Feed</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/feed.js~FeedList.html">FeedList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/feedfile.js~FeedFile.html">FeedFile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/feedfile.js~FeedFileList.html">FeedFileList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/note.js~Note.html">Note</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugin.js~Plugin.html">Plugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugin.js~PluginList.html">PluginList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugininstance.js~PluginInstance.html">PluginInstance</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugininstance.js~PluginInstanceList.html">PluginInstanceList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugininstance.js~PluginInstanceParameter.html">PluginInstanceParameter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugininstance.js~PluginInstanceParameterList.html">PluginInstanceParameterList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/pluginparameter.js~PluginParameter.html">PluginParameter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/pluginparameter.js~PluginParameterList.html">PluginParameterList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/request.js~Request.html">Request</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/resource.js~ItemResource.html">ItemResource</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/resource.js~ListResource.html">ListResource</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/resource.js~Resource.html">Resource</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/tag.js~Tag.html">Tag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/tag.js~TagList.html">TagList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/uploadedfile.js~UploadedFile.html">UploadedFile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/uploadedfile.js~UploadedFileList.html">UploadedFileList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/user.js~User.html">User</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="chris-api">ChRIS API</h1><p>JavaScript6 client for the ChRIS API.</p>
<h2 id="usage">Usage</h2><p>If you have a ChRIS server up and running (eg. as explained below) then you can use and test the API in your Javascript code:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const chrisUrl = &apos;http://localhost:8000/api/v1/&apos;;
const usersUrl = chrisUrl + &apos;users/&apos;;
const authUrl = chrisUrl + &apos;auth-token/&apos;;
let authToken;
let resp;


// create a new user
resp = Client.createUser(usersUrl, &apos;user1&apos;, &apos;user1pass&apos;, &apos;user1@gmail.com&apos;);
resp
  .then(user =&gt; {

    window.console.log(&apos;New user: &apos;, user);
  })
  .catch(error =&gt; {

    window.console.log(&apos;Error!!!: &apos;, error);
  });


// retrieve a user auth token
resp = Client.getAuthToken(authUrl, &apos;cube&apos;, &apos;cube1234&apos;);
resp
  .then(token =&gt; {

    window.console.log(&apos;Token: &apos;, token);
    authToken = token;
  })
  .catch(error =&gt; {

    window.console.log(&apos;Error!!!: &apos;, error);
  });
</code>
</code></pre>
<p>The ChRIS Javascript client API takes an object oriented approach in which every API resource object is an instance
of a Javascript class that inherits from either of two base classes:</p>
<ul>
<li><code>ItemResource</code> (an object containing a reference to an individual item in a collection of resource items)</li>
<li><code>ListResource</code> (an object modeling a collection of resource items)</li>
</ul>
<p>These model the two general type of REST API resources available from a ChRIS server.</p>
<p>In addition to methods and properties provided by these base classes every resource object returned by
the client API contains additional methods to fetch its associated resources (item or list resources)
from the ChRIS REST API. It can also contain <code>get</code>, <code>post</code>, <code>put</code> and <code>delete</code> methods as allowed by
the REST API. In particular every object has a <code>get</code> method that updates the internal state of the object
with the new data fetched from the ChRIS server. A <code>clone</code> method is provided to cover the case when a reference
to the previous object state is desired. This method returns a new instance of the same class as the cloned object.</p>
<p>All methods that fetch a resource from the REST API return a JS Promise which is passed the corresponding resource
object as an argument to the fulfillment callback.</p>
<p>All resources can be fetched from the REST API starting the initial <code>FeedList</code> instance object returned by the client
as in the following examples:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">
// create a new client instance with an auth object to be able to make authenticated requests
const auth = {token: authToken}; // or alternatively auth = {username: &apos;cube&apos;, password: &apos;cube1234&apos;}
const client = new Client(chrisUrl, auth);

// fetch a subset of currently authenticated user&apos;s feeds from the REST API into an initial Feedlist object
let params = { limit: 10, offset: 0 };
let feedListObj;
let feedListObjClone;

resp = client.getFeeds(params);
resp
  .then(feedListObj =&gt; {

    window.console.log(&apos;Feed list resource object: &apos;, feedListObj);

    // retrieve an array of the Feed item resource objects from feedListObj
    const feedObjArray = feedListObj.getItems();

    // log the individual Feed items&apos; data
    for (let feed of feedObjArray) {
        window.console.log(feed.data);
    }

    // fetch a list of available ChRIS plugins from the REST API
    const result1 = feedListObj.getPlugins(params);
    result1
      .then(pluginListObj =&gt; {

        window.console.log(&apos;Plugin list resource object: &apos;, pluginListObj);
      })

    // fetch the next page of feeds from the REST API
    feedListObjClone = feedListObj.clone(); // if desired save the object&apos;s current state in another object
    if (feedListObj.hasNextPage) {
      const result2 = feedListObj.getNextPage();
      result2
      .then(feedListObj =&gt; {

        window.console.log(&apos;Feed list resource object: &apos;, feedListObj);
      })
    }
  })
  .catch(error =&gt; {

    window.console.log(&apos;Error!!!: &apos;, error);
  });

// the Client&apos;s runAsyncTask static method could alternatively be used to wait for promises in Javascript 6
// for instance iterate over all pages of the list of available &apos;fs&apos; plugins
Client.runAsyncTask(function*() {

  feedListObj = yield client.getFeeds(); // wait here
  let pluginListObj = yield feedListObj.getPlugins({limit: 1}); // this is to just fetch an initial PluginList resource obj

  const searchParams = { type: &apos;fs&apos;};
  // const searchParams = {limit: 10, offset:0, type: &apos;fs&apos;}; if you want to override default REST API page size
  pluginListObj = pluginListObj.getSearch(searchParams);
  window.console.log(&apos;Page 1 of Plugin fs list resource object: &apos;, pluginListObj);

  let i = 2;
  while (pluginListObj.hasNextPage) {
    pluginListObj = pluginListObj.getNextPage();
    window.console.log(&apos;Page &apos; + i + &apos; of Plugin fs list resource object: &apos;, pluginListObj);
    i++;
  }
});
</code>
</code></pre>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
